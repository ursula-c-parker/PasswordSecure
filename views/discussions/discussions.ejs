<%- include('../partials/header'); %>
<%- include('../partials/navbar'); %>

<div class="default">

<h1>Discussions</h1>

<div id="newDiscussion">
  <br />
  <div class="row">
    <div class="col s12 m12">
      <div class="card blue-grey darken-1">
        <div class="card-content white-text">
        <h4><a href="../discussions/newDiscussion/">Post New Discussion</a></h4>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="row">
  <div class="col s12 m12">

    <% for(let i=0; i<Object.keys(discussions).length; i++){ %>
      <div class="card blue-grey darken-1">
        <div class="card-content white-text">
          <span class="card-title"><a href="../discussions/discussion/<%= discussions[Object.keys(discussions)[i]].id %>"><%= discussions[Object.keys(discussions)[i]].title %></a></span>
        </div>
      </div>
    <%}%>

  </div>
</div>

<h1>Admin</h1>

<div class="row">
  <div class="col s12 m12">

    <% for(let i=0; i<Object.keys(admin).length; i++){ %>
      <div class="card blue-grey darken-1">
        <div class="card-content white-text">
          <span class="card-title"><a href="../users/admin/<%= admin[Object.keys(admin)[i]].id %>"><%= admin[Object.keys(admin)[i]].username %></a></span>
        </div>
      </div>
    <%}%>

  </div>
</div>

<h1>Users</h1>

<div class="row">
  <div class="col s12 m12">

    <% for(let i=0; i<Object.keys(users).length; i++){ %>
      <div class="card blue-grey darken-1">
        <div class="card-content white-text">
          <span class="card-title"><a href="../users/user/<%= users[Object.keys(users)[i]].id %>"><%= users[Object.keys(users)[i]].username %></a></span>
        </div>
      </div>
    <%}%>

  </div>
</div>

</div>

<%- include('../partials/footer'); %>

<script>

  if (localStorage.getItem("isAdmin") == "true") {
    document.getElementById("newDiscussion").style.display = "block"
    console.log("is admin")
  }else {
    document.getElementById("newDiscussion").style.display = "none"
    console.log("isnt admin")
  }

</script>
